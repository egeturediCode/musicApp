{% extends "main.html" %}
{% load static %}


{% block title %} MusicApp | HomePage {% endblock %}


{% block content %}
            <div class="trending">
                <div class="left">
                    <h5>Trending New Song</h5>
                    <div class="info">
                        <h2>{{ Trending.music_name }}</h2>
                        <h4>{{ Trending.artist_name }}</h4>
                        <h5>2 Million Plays</h5>
                        <div class="buttons">
                            <button class="not-listed run-button player-open-btn"
                            data-song-music-name="{{ Trending.music_name }}"
                            data-song-artist-name="{{ Trending.artist_name }}"
                            data-song-duration="{{ Trending.duration }}"
                            data-song-image="{{ Trending.image.url }}"
                            data-song-file="{{ Trending.audio_file }}">Listen Now</button>
                            <button class="heart" id="fav-btn-{{ Trending.id }}" onclick="toggleFavorite('{{Trending.id}}')">
                                <i class="bx bxs-heart {% if Trending.is_fav %}active{% endif %}"></i>
                            </button>
                            <form style="display: none;"><input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}"></form>
                        </div>
                    </div>
                </div>
                <div class="trending-img">
                    <img src="{{ Trending.image.url }}">
                </div>
            </div>

            <div class="playlist">
                <div class="genres">
                    <div class="header">
                        <h5>Genres</h5>
                        <a href="/genres">See all</a>
                    </div>
                    {% if Genres|length < 5 %}
                    <div style="grid-template-columns: 1fr;" class="items">
                        {% for genre in Genres %}
                        {% if genre.is_showed == True %}
                        <div class="item">
                            <p>{{ genre.name }}</p>
                        </div>
                        {% endif %}
                        {% endfor %}
                    {% else %}
                    <div class="items">
                        {% for genre in Genres %}
                        {% if genre.is_showed == True %}
                        <div class="item">
                            <p>{{ genre.name }}</p>
                        </div>
                        {% endif %}
                        {% endfor %}
                    {% endif %}
                    </div>
                </div>

                <div class="music-list">
                    <div class="header">
                        <h5>{{ Selected_playlist.name }}</h5>
                        <a href="/playlist/{{Selected_playlist.id}}">See all</a>
                    </div>
                    <div class="items">
                        {% for song in Selected_playlist.songs.all %}
                        <div class="item">
                            <div class="info">
                                <p>#{{ forloop.counter }}</p>
                                <img src="{{ song.image.url }}">
                                <div class="details">
                                    <h5>{{ song.music_name }}</h5>
                                    <p>{{ song.artist_name }}</p>
                                </div>
                            </div>
                            <div class="actions">
                                <p>{{ song.duration }}</p>
                                <div class="icon">
                                    <div class="run-button player-open-btn" 
                                    data-song-music-name="{{ song.music_name }}"
                                    data-song-artist-name="{{ song.artist_name }}"
                                    data-song-duration="{{ song.duration }}"
                                    data-song-image="{{ song.image.url }}"
                                    data-song-file="{{ song.audio_file }}"
                                    ><i class="bx bxs-right-arrow"></i></div>
                                </div>
                                <div><i class="bx bxs-plus-square"></i></div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>

</main>
{% endblock %}

